<!DOCTYPE html>

<!-- # Data Representation
# Lecturer: Andrew Beatty
# Author: David Ryan
# Student ID: G00398318 -->

<html>
    <head>
        <title> View URLs</title>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
       
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

        <!-- https://stackoverflow.com/questions/22259847/application-not-picking-up-css-file-flask-python -->
        <link rel="stylesheet" href="{{ url_for('static', filename='style.css')}}">
      </head>


    <div class="container">
      <!--Heading 1 for the sections styled with CSS in class "text-center" -->
      <h1 class="container">URL DB</h1>
      <div class="wrapper">
          <p>
              <!-- pythonanywhere.com  
              <a href="/graph" class="linktext">LogOut</a> -->
              <a href="http://127.0.0.1:5000/index" class="linktext">URLDB</a> 
              <!-- pythonanywhere.com  
              <a href="/" class="linktext">LogOut</a> -->
              <a href="http://127.0.0.1:5000/logout" class="linktext">LogOut</a> 
          </p>
      </div>
    </div>

    <body>
        <!-- HTML page with placeholder for graph -->
        <div id="graph"></div>
    </body>


    <script>
        // Retrieve data from Flask backend
        $.ajax({
            url: "http://127.0.0.1:5000/urls",
            dataType: 'json',
            success: function(data) {
                // Display the data in the graph
                var ctx = document.getElementById('graph').getContext('2d');
                var chart = new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: data.labels,
                        datasets: [{
                            label: 'URL data',
                            data: data.data,
                            backgroundColor: data.backgroundColors
                        }]
                    },
                    options: {
                        scales: {
                            yAxes: [{
                                ticks: {
                                    beginAtZero: true
                                }
                            }]
                        }
                    }
                });
            }
        });
    </script>